{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":43,"index":344}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return u}});var t=e(r(d[0])),s=e(r(d[1]));var u=class{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(e=>this.enqueue(e))}cancelTasks(e){this._queueStack=this._queueStack.map(s=>(0,t.default)((0,t.default)({},s),{},{tasks:s.tasks.filter(t=>-1===e.indexOf(t))})).filter((e,t)=>e.tasks.length>0||0===t)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():((0,s.default)('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1})-1,s=this._queueStack[t];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(t=>{setTimeout(()=>{throw t.message=\"TaskQueue: Error resolving Promise in task \"+e.name+\": \"+t.message,t},0)})}}});","lineCount":1,"map":[[1,143,87,0,"Object"],[1,150,87,0,"defineProperty"],[1,165,87,0,"_e"],[1,168,87,0],[1,179,87,0,"enumerable"],[1,191,87,0],[1,193,87,0,"get"],[1,197,87,0],[1,215,87,0,"_default"],[1,216,87,0],[1,220,1,0],[1,224,1,0,"_objectSpread"],[1,226,1,0,"_interopDefault"],[1,228,1,0,"r"],[1,230,1,0,"d"],[1,232,1,0],[1,237,12,0,"invariant"],[1,239,12,0,"_interopDefault"],[1,241,12,0,"r"],[1,243,12,0,"d"],[1,245,12,0],[1,250,87,0],[1,254,87,0,"_default"],[1,256,13,0],[1,262,14,2,"constructor"],[1,274,14,14,"_ref"],[1,277,15,4],[1,281,15,8,"onMoreTasks"],[1,283,15,22,"_ref"],[1,285,15,27,"onMoreTasks"],[1,297,16,4,"this"],[1,302,16,9,"_onMoreTasks"],[1,315,16,24,"onMoreTasks"],[1,317,17,4,"this"],[1,322,17,9,"_queueStack"],[1,334,17,23],[1,335,17,24],[1,336,18,6,"tasks"],[1,342,18,13],[1,345,19,6,"popable"],[1,354,19,15],[1,357,21,2],[1,358,22,2,"enqueue"],[1,366,22,10,"task"],[1,369,23,4,"this"],[1,374,23,9,"_getCurrentQueue"],[1,393,23,28,"push"],[1,398,23,33,"task"],[1,400,24,2],[1,401,25,2,"enqueueTasks"],[1,414,25,15,"tasks"],[1,417,26,4,"tasks"],[1,419,26,10,"forEach"],[1,427,26,18,"task"],[1,430,26,26,"this"],[1,435,26,31,"enqueue"],[1,443,26,39,"task"],[1,446,27,2],[1,447,28,2,"cancelTasks"],[1,459,28,14,"tasksToCancel"],[1,462,29,4,"this"],[1,467,29,9,"_queueStack"],[1,479,29,23,"this"],[1,484,29,28,"_queueStack"],[1,496,29,40,"map"],[1,500,29,44,"queue"],[1,504,29,53],[1,506,29,53,"_objectSpread"],[1,508,29,66,"default"],[1,518,29,67],[1,520,29,67,"_objectSpread"],[1,522,29,80,"default"],[1,531,29,81],[1,532,29,82],[1,534,29,85,"queue"],[1,537,29,93],[1,538,29,94],[1,540,29,97],[1,541,30,6,"tasks"],[1,547,30,13,"queue"],[1,549,30,19,"tasks"],[1,555,30,25,"filter"],[1,562,30,32,"task"],[1,566,30,67],[1,570,30,40,"tasksToCancel"],[1,572,30,54,"indexOf"],[1,580,30,62,"task"],[1,587,31,8,"filter"],[1,594,31,15],[1,595,31,16,"queue"],[1,597,31,23,"idx"],[1,601,31,31,"queue"],[1,603,31,37,"tasks"],[1,609,31,43,"length"],[1,616,31,52],[1,619,31,65],[1,623,31,57,"idx"],[1,625,32,2],[1,626,33,2,"hasTasksToProcess"],[1,646,34,4],[1,653,34,11,"this"],[1,658,34,16,"_getCurrentQueue"],[1,677,34,35,"length"],[1,684,34,44],[1,685,35,2],[1,686,40,2,"processNext"],[1,700,41,4],[1,704,41,8,"queue"],[1,706,41,16,"this"],[1,711,41,21,"_getCurrentQueue"],[1,730,42,4],[1,733,42,8,"queue"],[1,735,42,14,"length"],[1,742,42,22],[1,743,43,6],[1,747,43,10,"task"],[1,749,43,17,"queue"],[1,751,43,23,"shift"],[1,759,44,6],[1,763,45,28],[1,780,45,19,"task"],[1,783,45,40,"task"],[1,785,45,45,"gen"],[1,789,46,10,"this"],[1,794,46,15,"_genPromise"],[1,806,46,27,"task"],[1,809,47,35],[1,826,47,26,"task"],[1,829,47,47,"task"],[1,831,47,52,"run"],[1,835,48,10,"task"],[1,837,48,15,"run"],[1,845,50,10],[1,847,50,10,"invariant"],[1,849,50,19,"default"],[1,858,50,36],[1,877,50,27,"task"],[1,879,50,48],[1,939,50,110,"JSON"],[1,944,50,115,"stringify"],[1,954,50,125,"task"],[1,956,50,131],[1,961,50,137],[1,965,51,10,"task"],[1,969,53,6],[1,970,53,8],[1,976,53,15,"e"],[1,979,55,8],[1,985,54,8,"e"],[1,987,54,10,"message"],[1,995,54,20],[1,1026,54,53,"task"],[1,1028,54,58,"name"],[1,1034,54,66],[1,1038,54,72],[1,1043,54,79,"e"],[1,1045,54,81,"message"],[1,1053,55,14,"e"],[1,1054,56,6],[1,1055,57,4],[1,1056,58,2],[1,1057,59,2,"_getCurrentQueue"],[1,1076,60,4],[1,1080,60,8,"stackIdx"],[1,1082,60,19,"this"],[1,1087,60,24,"_queueStack"],[1,1099,60,36,"length"],[1,1106,60,45],[1,1108,61,8,"queue"],[1,1110,61,16,"this"],[1,1115,61,21,"_queueStack"],[1,1127,61,33,"stackIdx"],[1,1130,62,4],[1,1137,62,8,"queue"],[1,1139,62,14,"popable"],[1,1148,62,48],[1,1152,62,25,"queue"],[1,1154,62,31,"tasks"],[1,1160,62,37,"length"],[1,1168,62,53,"stackIdx"],[1,1170,62,64],[1,1173,63,6,"this"],[1,1178,63,11,"_queueStack"],[1,1190,63,23,"pop"],[1,1196,64,13,"this"],[1,1201,64,18,"_getCurrentQueue"],[1,1221,66,13,"queue"],[1,1223,66,19,"tasks"],[1,1228,68,2],[1,1229,69,2,"_genPromise"],[1,1241,69,14,"task"],[1,1244,70,4],[1,1248,74,8,"stackIdx"],[1,1250,70,17,"this"],[1,1255,70,22,"_queueStack"],[1,1267,70,34,"push"],[1,1272,70,39],[1,1273,71,6,"tasks"],[1,1279,71,13],[1,1282,72,6,"popable"],[1,1291,72,15],[1,1295,74,28],[1,1297,75,8,"stackItem"],[1,1299,75,20,"this"],[1,1304,75,25,"_queueStack"],[1,1316,75,37,"stackIdx"],[1,1319,76,4,"task"],[1,1321,76,9,"gen"],[1,1327,76,15,"then"],[1,1332,76,20],[1,1337,77,6,"stackItem"],[1,1339,77,16,"popable"],[1,1348,77,26],[1,1350,78,6,"this"],[1,1355,78,11,"hasTasksToProcess"],[1,1376,78,34,"this"],[1,1381,78,39,"_onMoreTasks"],[1,1398,79,7,"catch"],[1,1404,79,13,"ex"],[1,1408,80,6,"setTimeout"],[1,1419,80,17],[1,1424,82,8],[1,1430,81,8,"ex"],[1,1432,81,11,"message"],[1,1440,81,21],[1,1486,81,69,"task"],[1,1488,81,74,"name"],[1,1493,81,81],[1,1498,81,88,"ex"],[1,1500,81,91,"message"],[1,1508,82,14,"ex"],[1,1511,83,9],[1,1515,85,2],[1,1517,87,25],[1,1520]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACY;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"},"hasCjsExports":false},"type":"js/module"}]}