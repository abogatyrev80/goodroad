{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":225},"end":{"line":13,"column":65,"index":290}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createForOfIteratorHelperLoose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":291},"end":{"line":14,"column":100,"index":391}}],"key":"Y/2Rvrgl4aDxeJKdk1U58Vc2xw8=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":392},"end":{"line":15,"column":43,"index":435}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){'use strict';function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return u}});var t=e(r(d[0])),n=e(r(d[1])),s=e(r(d[2]));function l(e,t,n,s,l,u){if(h(n,s,l))return!0;var c=o(n,s,l);return 100*(e?c/l:c/u)>=t}function o(e,t,n){var s=Math.min(t,n)-Math.max(e,0);return Math.max(0,s)}function h(e,t,n){return e>=0&&t<=n&&t>e}var u=class{constructor(e){void 0===e&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,n,o,h){var u=e.getItemCount(e.data),c=this._config,f=c.itemVisiblePercentThreshold,v=c.viewAreaCoveragePercentThreshold,_=null!=v,w=_?v:f;(0,s.default)(null!=w&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var b=[];if(0===u)return b;var I=-1,p=h||{first:0,last:u-1},y=p.first,T=p.last;if(T>=u)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:h,itemCount:u})),[];for(var M=y;M<=T;M++){var V=o(M,e);if(V){var C=V.offset-t,P=C+V.length;if(C<n&&P>0)I=M,l(_,w,C,P,n,V.length)&&b.push(M);else if(I>=0)break}}return b}onUpdate(e,t,n,s,l,o,h){var u=e.getItemCount(e.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==u&&s(0,e)){var c=[];if(u&&(c=this.computeViewableItems(e,t,n,s,h)),this._viewableIndices.length!==c.length||!this._viewableIndices.every((e,t)=>e===c[t]))if(this._viewableIndices=c,this._config.minimumViewTime){var f=setTimeout(()=>{this._timers.delete(f),this._onUpdateSync(e,c,o,l)},this._config.minimumViewTime);this._timers.add(f)}else this._onUpdateSync(e,c,o,l)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,s,l,o){s=s.filter(e=>this._viewableIndices.includes(e));for(var h,u=this._viewableItems,c=new Map(s.map(t=>{var n=o(t,!0,e);return[n.key,n]})),f=[],v=(0,n.default)(c);!(h=v()).done;){var _=h.value,w=_[0],b=_[1];u.has(w)||f.push(b)}for(var I,p=(0,n.default)(u);!(I=p()).done;){var y=I.value,T=y[0],M=y[1];c.has(T)||f.push((0,t.default)((0,t.default)({},M),{},{isViewable:!1}))}f.length>0&&(this._viewableItems=c,l({viewableItems:Array.from(c.values()),changed:f,viewabilityConfig:this._config}))}}});","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,51,11,13,"_interopDefault"],[1,53,11,13,"e"],[1,56,11,13],[1,63,11,13,"e"],[1,68,11,13,"__esModule"],[1,79,11,13,"e"],[1,81,11,13],[1,82,11,13,"default"],[1,90,11,13,"e"],[1,92,11,13],[1,93,11,13,"Object"],[1,100,11,13,"defineProperty"],[1,115,11,13,"_e"],[1,118,11,13],[1,132,11,13,"value"],[1,139,11,13],[1,143,206,0,"Object"],[1,150,206,0,"defineProperty"],[1,165,206,0,"_e"],[1,168,206,0],[1,179,206,0,"enumerable"],[1,191,206,0],[1,193,206,0,"get"],[1,197,206,0],[1,215,206,0,"_default"],[1,216,206,0],[1,220,13,0],[1,224,13,0,"_objectSpread"],[1,226,13,0,"_interopDefault"],[1,228,13,0,"r"],[1,230,13,0,"d"],[1,232,13,0],[1,237,14,0,"_createForOfIteratorHelperLoose"],[1,239,14,0,"_interopDefault"],[1,241,14,0,"r"],[1,243,14,0,"d"],[1,245,14,0],[1,250,15,0,"invariant"],[1,252,15,0,"_interopDefault"],[1,254,15,0,"r"],[1,256,15,0,"d"],[1,258,15,0],[1,263,190,0],[1,272,190,9,"_isViewable"],[1,274,190,21,"viewAreaMode"],[1,276,190,35,"viewablePercentThreshold"],[1,278,190,61,"top"],[1,280,190,66,"bottom"],[1,282,190,74,"viewportHeight"],[1,284,190,90,"itemLength"],[1,287,191,2],[1,290,191,6,"_isEntirelyVisible"],[1,292,191,25,"top"],[1,294,191,30,"bottom"],[1,296,191,38,"viewportHeight"],[1,299,192,4],[1,306,192,11],[1,308,194,4],[1,312,194,8,"pixels"],[1,314,194,17,"_getPixelsVisible"],[1,316,194,35,"top"],[1,318,194,40,"bottom"],[1,320,194,48,"viewportHeight"],[1,323,196,4],[1,330,195,18],[1,335,195,25,"viewAreaMode"],[1,337,195,40,"pixels"],[1,339,195,49,"viewportHeight"],[1,341,195,66,"pixels"],[1,343,195,75,"itemLength"],[1,347,196,22,"viewablePercentThreshold"],[1,348,198,0],[1,349,199,0],[1,358,199,9,"_getPixelsVisible"],[1,360,199,27,"top"],[1,362,199,32,"bottom"],[1,364,199,40,"viewportHeight"],[1,367,200,2],[1,371,200,6,"visibleHeight"],[1,373,200,22,"Math"],[1,378,200,27,"min"],[1,382,200,31,"bottom"],[1,384,200,39,"viewportHeight"],[1,387,200,57,"Math"],[1,392,200,62,"max"],[1,396,200,66,"top"],[1,398,200,71],[1,401,201,2],[1,408,201,9,"Math"],[1,413,201,14,"max"],[1,417,201,18],[1,419,201,21,"visibleHeight"],[1,421,202,0],[1,422,203,0],[1,431,203,9,"_isEntirelyVisible"],[1,433,203,28,"top"],[1,435,203,33,"bottom"],[1,437,203,41,"viewportHeight"],[1,440,204,2],[1,447,204,9,"top"],[1,450,204,16],[1,453,204,21,"bottom"],[1,456,204,31,"viewportHeight"],[1,459,204,49,"bottom"],[1,461,204,58,"top"],[1,462,205,0],[1,463,206,0],[1,467,206,0,"_default"],[1,469,28,0],[1,475,29,2,"constructor"],[1,487,29,14,"config"],[1,495,30,14,"undefined"],[1,499,30,8,"config"],[1,503,31,6,"config"],[1,505,31,15],[1,506,32,8,"viewAreaCoveragePercentThreshold"],[1,539,32,42],[1,543,35,4,"this"],[1,548,35,9,"_hasInteracted"],[1,564,35,26],[1,566,36,4,"this"],[1,571,36,9,"_timers"],[1,579,36,19],[1,583,36,23,"Set"],[1,587,37,4,"this"],[1,592,37,9,"_viewableIndices"],[1,609,37,28],[1,612,38,4,"this"],[1,617,38,9,"_viewableItems"],[1,632,38,26],[1,636,38,30,"Map"],[1,640,39,4,"this"],[1,645,39,9,"_config"],[1,653,39,19,"config"],[1,654,40,2],[1,655,45,2,"dispose"],[1,665,49,4,"this"],[1,670,49,9,"_timers"],[1,678,49,17,"forEach"],[1,686,49,25,"clearTimeout"],[1,699,50,2],[1,700,55,2,"computeViewableItems"],[1,721,55,23,"props"],[1,723,55,30,"scrollOffset"],[1,725,55,44,"viewportHeight"],[1,727,55,60,"getFrameMetrics"],[1,729,57,2,"renderRange"],[1,732,58,4],[1,736,58,8,"itemCount"],[1,738,58,20,"props"],[1,740,58,26,"getItemCount"],[1,753,58,39,"props"],[1,755,58,45,"data"],[1,761,59,8,"_this$_config"],[1,763,59,24,"this"],[1,768,59,29,"_config"],[1,776,60,6,"itemVisiblePercentThreshold"],[1,778,60,36,"_this$_config"],[1,780,60,50,"itemVisiblePercentThreshold"],[1,808,61,6,"viewAreaCoveragePercentThreshold"],[1,810,61,41,"_this$_config"],[1,812,61,55,"viewAreaCoveragePercentThreshold"],[1,845,62,8,"viewAreaMode"],[1,847,62,59],[1,853,62,23,"viewAreaCoveragePercentThreshold"],[1,855,63,8,"viewablePercentThreshold"],[1,857,63,35,"viewAreaMode"],[1,859,63,50,"viewAreaCoveragePercentThreshold"],[1,861,63,85,"itemVisiblePercentThreshold"],[1,864,64,4],[1,866,64,4,"invariant"],[1,868,64,13,"default"],[1,877,64,42],[1,883,64,14,"viewablePercentThreshold"],[1,886,64,81],[1,892,64,50,"itemVisiblePercentThreshold"],[1,896,64,127],[1,902,64,91,"viewAreaCoveragePercentThreshold"],[1,905,64,134],[1,996,65,4],[1,1000,65,8,"viewableIndices"],[1,1002,65,26],[1,1005,66,4],[1,1008,66,22],[1,1012,66,8,"itemCount"],[1,1014,67,6],[1,1021,67,13,"viewableIndices"],[1,1023,69,4],[1,1027,69,8,"firstVisible"],[1,1030,69,20],[1,1032,70,8,"_ref"],[1,1034,70,15,"renderRange"],[1,1037,70,30],[1,1038,71,8,"first"],[1,1044,71,15],[1,1046,72,8,"last"],[1,1051,72,14,"itemCount"],[1,1053,72,26],[1,1056,74,6,"first"],[1,1058,74,14,"_ref"],[1,1060,74,19,"first"],[1,1066,75,6,"last"],[1,1068,75,13,"_ref"],[1,1070,75,18,"last"],[1,1075,76,4],[1,1078,76,8,"last"],[1,1081,76,16,"itemCount"],[1,1083,81,6],[1,1090,77,6,"console"],[1,1098,77,14,"warn"],[1,1103,77,19],[1,1149,77,67,"JSON"],[1,1154,77,72,"stringify"],[1,1164,77,82],[1,1165,78,8,"renderRange"],[1,1179,79,8,"itemCount"],[1,1194,81,13],[1,1197,83,4],[1,1201,83,9],[1,1205,83,13,"idx"],[1,1207,83,19,"first"],[1,1209,83,26,"idx"],[1,1212,83,33,"last"],[1,1214,83,39,"idx"],[1,1218,83,46],[1,1219,84,6],[1,1223,84,10,"metrics"],[1,1225,84,20,"getFrameMetrics"],[1,1227,84,36,"idx"],[1,1229,84,41,"props"],[1,1232,85,6],[1,1235,85,11,"metrics"],[1,1237,85,6],[1,1238,88,6],[1,1242,88,10,"top"],[1,1244,88,16,"metrics"],[1,1246,88,24,"offset"],[1,1253,88,33,"scrollOffset"],[1,1255,89,10,"bottom"],[1,1257,89,19,"top"],[1,1259,89,25,"metrics"],[1,1261,89,33,"length"],[1,1268,90,6],[1,1271,90,10,"top"],[1,1273,90,16,"viewportHeight"],[1,1276,90,34,"bottom"],[1,1278,90,43],[1,1280,91,8,"firstVisible"],[1,1282,91,23,"idx"],[1,1284,92,12,"_isViewable"],[1,1286,92,24,"viewAreaMode"],[1,1288,92,38,"viewablePercentThreshold"],[1,1290,92,64,"top"],[1,1292,92,69,"bottom"],[1,1294,92,77,"viewportHeight"],[1,1296,92,93,"metrics"],[1,1298,92,101,"length"],[1,1307,93,10,"viewableIndices"],[1,1309,93,26,"push"],[1,1314,93,31,"idx"],[1,1322,95,13],[1,1325,95,17,"firstVisible"],[1,1328,95,33],[1,1330,96,8],[1,1335,87,6],[1,1336,98,4],[1,1337,99,4],[1,1344,99,11,"viewableIndices"],[1,1345,100,2],[1,1346,106,2,"onUpdate"],[1,1355,106,11,"props"],[1,1357,106,18,"scrollOffset"],[1,1359,106,32,"viewportHeight"],[1,1361,106,48,"getFrameMetrics"],[1,1363,106,65,"createViewToken"],[1,1365,106,82,"onViewableItemsChanged"],[1,1367,108,2,"renderRange"],[1,1370,109,4],[1,1374,109,8,"itemCount"],[1,1376,109,20,"props"],[1,1378,109,26,"getItemCount"],[1,1391,109,39,"props"],[1,1393,109,45,"data"],[1,1399,110,4],[1,1404,110,8,"this"],[1,1409,110,13,"_config"],[1,1417,110,21,"waitForInteraction"],[1,1437,110,44,"this"],[1,1442,110,49,"_hasInteracted"],[1,1459,110,81],[1,1463,110,67,"itemCount"],[1,1466,110,87,"getFrameMetrics"],[1,1468,110,103],[1,1470,110,106,"props"],[1,1473,110,4],[1,1474,113,4],[1,1478,113,8,"viewableIndices"],[1,1480,113,26],[1,1483,117,4],[1,1486,114,8,"itemCount"],[1,1490,115,6,"viewableIndices"],[1,1492,115,24,"this"],[1,1497,115,29,"computeViewableItems"],[1,1518,115,50,"props"],[1,1520,115,57,"scrollOffset"],[1,1522,115,71,"viewportHeight"],[1,1524,115,87,"getFrameMetrics"],[1,1526,115,104,"renderRange"],[1,1530,117,8,"this"],[1,1535,117,13,"_viewableIndices"],[1,1552,117,30,"length"],[1,1561,117,41,"viewableIndices"],[1,1563,117,57,"length"],[1,1572,117,67,"this"],[1,1577,117,72,"_viewableIndices"],[1,1594,117,89,"every"],[1,1600,117,95],[1,1601,117,96,"v"],[1,1603,117,99,"ii"],[1,1607,117,106,"v"],[1,1611,117,112,"viewableIndices"],[1,1613,117,128,"ii"],[1,1617,123,4],[1,1620,122,4,"this"],[1,1625,122,9,"_viewableIndices"],[1,1642,122,28,"viewableIndices"],[1,1644,123,8,"this"],[1,1649,123,13,"_config"],[1,1657,123,21,"minimumViewTime"],[1,1673,123,38],[1,1674,124,6],[1,1678,124,10,"handle"],[1,1680,124,19,"setTimeout"],[1,1691,124,30],[1,1696,128,8,"this"],[1,1701,128,13,"_timers"],[1,1709,128,21,"delete"],[1,1716,128,28,"handle"],[1,1719,129,8,"this"],[1,1724,129,13,"_onUpdateSync"],[1,1738,129,27,"props"],[1,1740,129,34,"viewableIndices"],[1,1742,129,51,"onViewableItemsChanged"],[1,1744,129,75,"createViewToken"],[1,1748,130,9,"this"],[1,1753,130,14,"_config"],[1,1761,130,22,"minimumViewTime"],[1,1778,134,6,"this"],[1,1783,134,11,"_timers"],[1,1791,134,19,"add"],[1,1795,134,23,"handle"],[1,1797,135,4],[1,1803,136,6,"this"],[1,1808,136,11,"_onUpdateSync"],[1,1822,136,25,"props"],[1,1824,136,32,"viewableIndices"],[1,1826,136,49,"onViewableItemsChanged"],[1,1828,136,73,"createViewToken"],[1,1830,112,4],[1,1831,138,2],[1,1832,143,2,"resetViewableIndices"],[1,1855,144,4,"this"],[1,1860,144,9,"_viewableIndices"],[1,1877,144,28],[1,1879,145,2],[1,1880,150,2,"recordInteraction"],[1,1900,151,4,"this"],[1,1905,151,9,"_hasInteracted"],[1,1921,151,26],[1,1922,152,2],[1,1923,153,2,"_onUpdateSync"],[1,1937,153,16,"props"],[1,1939,153,23,"viewableIndicesToCheck"],[1,1941,153,47,"onViewableItemsChanged"],[1,1943,153,71,"createViewToken"],[1,1946,155,4,"viewableIndicesToCheck"],[1,1948,155,29,"viewableIndicesToCheck"],[1,1950,155,52,"filter"],[1,1957,155,59,"ii"],[1,1960,155,65,"this"],[1,1965,155,70,"_viewableIndices"],[1,1982,155,87,"includes"],[1,1991,155,96,"ii"],[1,1995,162,4],[1,1999,156,4],[1,2003,162,69,"_step"],[1,2005,156,8,"prevItems"],[1,2007,156,20,"this"],[1,2012,156,25,"_viewableItems"],[1,2027,157,8,"nextItems"],[1,2029,157,20],[1,2033,157,24,"Map"],[1,2037,157,28,"viewableIndicesToCheck"],[1,2039,157,51,"map"],[1,2043,157,55,"ii"],[1,2047,158,6],[1,2051,158,10,"viewable"],[1,2053,158,21,"createViewToken"],[1,2055,158,37,"ii"],[1,2058,158,41],[1,2060,158,47,"props"],[1,2063,159,6],[1,2069,159,13],[1,2070,159,14,"viewable"],[1,2072,159,23,"key"],[1,2076,159,28,"viewable"],[1,2082,161,8,"changed"],[1,2084,161,18],[1,2087,162,13,"_iterator"],[1,2090,162,25],[1,2092,162,25,"_createForOfIteratorHelperLoose"],[1,2094,162,56,"default"],[1,2103,162,57,"nextItems"],[1,2108,162,78,"_step"],[1,2110,162,86,"_iterator"],[1,2115,162,99,"done"],[1,2121,162,106],[1,2122,163,6],[1,2126,163,10,"_step$value"],[1,2128,163,24,"_step"],[1,2130,163,30,"value"],[1,2136,164,8,"key"],[1,2138,164,14,"_step$value"],[1,2140,164,26],[1,2143,165,8,"viewable"],[1,2145,165,19,"_step$value"],[1,2147,165,31],[1,2150,166,11,"prevItems"],[1,2152,166,21,"has"],[1,2156,166,25,"key"],[1,2160,167,8,"changed"],[1,2162,167,16,"push"],[1,2167,167,21,"viewable"],[1,2169,169,4],[1,2170,170,4],[1,2174,170,9],[1,2178,170,70,"_step2"],[1,2180,170,13,"_iterator2"],[1,2183,170,26],[1,2185,170,26,"_createForOfIteratorHelperLoose"],[1,2187,170,57,"default"],[1,2196,170,58,"prevItems"],[1,2201,170,80,"_step2"],[1,2203,170,89,"_iterator2"],[1,2208,170,103,"done"],[1,2214,170,110],[1,2215,171,6],[1,2219,171,10,"_step2$value"],[1,2221,171,25,"_step2"],[1,2223,171,32,"value"],[1,2229,172,8,"_key"],[1,2231,172,15,"_step2$value"],[1,2233,172,28],[1,2236,173,8,"_viewable"],[1,2238,173,20,"_step2$value"],[1,2240,173,33],[1,2243,174,11,"nextItems"],[1,2245,174,21,"has"],[1,2249,174,25,"_key"],[1,2253,175,8,"changed"],[1,2255,175,16,"push"],[1,2261,175,21],[1,2263,175,21,"_objectSpread"],[1,2265,175,34,"default"],[1,2275,175,35],[1,2277,175,35,"_objectSpread"],[1,2279,175,48,"default"],[1,2288,175,49],[1,2289,175,50],[1,2291,175,53,"_viewable"],[1,2294,175,65],[1,2295,175,66],[1,2297,175,69],[1,2298,176,10,"isViewable"],[1,2310,176,22],[1,2314,179,4],[1,2315,180,8,"changed"],[1,2317,180,16,"length"],[1,2324,180,25],[1,2328,181,6,"this"],[1,2333,181,11,"_viewableItems"],[1,2348,181,28,"nextItems"],[1,2350,182,6,"onViewableItemsChanged"],[1,2352,182,29],[1,2353,183,8,"viewableItems"],[1,2367,183,23,"Array"],[1,2373,183,29,"from"],[1,2378,183,34,"nextItems"],[1,2380,183,44,"values"],[1,2390,184,8,"changed"],[1,2400,185,8,"viewabilityConfig"],[1,2418,185,27,"this"],[1,2423,185,32,"_config"],[1,2433,188,2],[1,2435,206,33],[1,2438]],"functionMap":{"names":["<global>","ViewabilityHelper","ViewabilityHelper#constructor","ViewabilityHelper#dispose","ViewabilityHelper#computeViewableItems","ViewabilityHelper#onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","ViewabilityHelper#resetViewableIndices","ViewabilityHelper#recordInteraction","ViewabilityHelper#_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC2B;ECC;GDW;EEK;GFK;EGK;GH6C;EIM;+FCW,oCD;8BEO;OFM;GJQ;EOK;GPE;EQK;GRE;ESC;2DCE,wCD;uDEE;KFG;GT4B;CDC;AaC;CbQ;AcC;CdG;AeC;CfE"},"hasCjsExports":false},"type":"js/module"}]}