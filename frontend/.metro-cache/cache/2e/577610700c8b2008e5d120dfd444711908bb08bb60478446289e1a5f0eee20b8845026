{"dependencies":[{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":181},"end":{"line":10,"column":55,"index":236}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"],"imports":1}},{"name":"../canUseDom","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":237},"end":{"line":11,"column":37,"index":274}}],"key":"NAgv5vx4h/J1uxoLSWxqZG/Z81Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.getActiveModality=function(){return s},_e.getModality=function(){return l},_e.addModalityListener=function(e){return f.add(e),()=>{f.delete(e)}},_e.testOnly_resetActiveModality=function(){v=!1,s=y,l=y};var e,t,n,o=r(d[0]),u=r(d[1]),c=(e=u)&&e.__esModule?e:{default:e},s='keyboard',l='keyboard',v=!1,f=new Set,y='keyboard',E='mouse',L='touch',h='contextmenu',p='mousedown',w='mousemove',b='mouseup',M='pointerdown',_='pointermove',k='scroll',K='selectionchange',A='touchcancel',O='touchmove',S='touchstart',j={passive:!0},x={capture:!0,passive:!0};function P(){null==t&&null==n||(null!=t&&(l=t,t=null),null!=n&&(s=n,n=null),z())}function q(e){var t=e.type;if(v||(t===p&&s!==E&&(l=E,s=E,z()),t===w&&l!==E&&(l=E,z())),t===S)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(s!==L&&(l=L,s=L,z()));t!==h&&t!==b&&t!==K&&t!==k&&t!==A&&t!==O||(v=!1)}function z(){var e={activeModality:s,modality:l};f.forEach(t=>{t(e)})}c.default&&((0,o.addEventListener)(window,'blur',function(){t=l,n=s,s=y,l=y,z(),v=!1},j),(0,o.addEventListener)(window,'focus',function(){P()},j),(0,o.addEventListener)(document,'keydown',function(e){e.metaKey||e.altKey||e.ctrlKey||l!==y&&(l=y,s=y,z())},x),(0,o.addEventListener)(document,'visibilitychange',function(){'hidden'!==document.visibilityState&&P()},x),(0,o.addEventListener)(document,M,q,x),(0,o.addEventListener)(document,_,q,x),(0,o.addEventListener)(document,h,q,x),(0,o.addEventListener)(document,p,q,x),(0,o.addEventListener)(document,w,q,x),(0,o.addEventListener)(document,b,q,x),(0,o.addEventListener)(document,A,q,x),(0,o.addEventListener)(document,O,q,x),(0,o.addEventListener)(document,S,q,x),(0,o.addEventListener)(document,K,q,x),(0,o.addEventListener)(document,k,q,x))});","lineCount":1,"map":[[1,92,172,0,"_e"],[1,95,172,0,"getActiveModality"],[1,113,172,7],[1,124,173,2],[1,131,173,9,"activeModality"],[1,132,174,0],[1,134,175,0,"_e"],[1,137,175,0,"getModality"],[1,149,175,7],[1,160,176,2],[1,167,176,9,"modality"],[1,168,177,0],[1,170,178,0,"_e"],[1,173,178,0,"addModalityListener"],[1,193,178,7],[1,202,178,36,"listener"],[1,205,180,2],[1,212,179,2,"listeners"],[1,214,179,12,"add"],[1,218,179,16,"listener"],[1,221,180,9],[1,226,181,4,"listeners"],[1,228,181,14,"delete"],[1,235,181,21,"listener"],[1,238,183,0],[1,240,184,0,"_e"],[1,243,184,0,"testOnly_resetActiveModality"],[1,272,184,7],[1,283,185,2,"isEmulatingMouseEvents"],[1,286,185,27],[1,288,186,2,"activeModality"],[1,290,186,19,"KEYBOARD"],[1,292,187,2,"modality"],[1,294,187,13,"KEYBOARD"],[1,295,188,0],[1,297,10,0],[1,301],[1,303,15,4,"previousModality"],[1,305,16,4,"previousActiveModality"],[1,307,10,0,"_addEventListener"],[1,309,10,0,"r"],[1,311,10,0,"d"],[1,313,10,0],[1,317,11,0,"_canUseDom"],[1,319,11,0,"r"],[1,321,11,0,"d"],[1,323,11,0],[1,327,11,0,"canUseDOM"],[1,330],[1,332,11,0,"_canUseDom"],[1,336],[1,363,13,4,"activeModality"],[1,365,13,21],[1,376,14,4,"modality"],[1,378,14,15],[1,389,17,4,"isEmulatingMouseEvents"],[1,392,17,29],[1,394,18,4,"listeners"],[1,396,18,16],[1,400,18,20,"Set"],[1,404,19,4,"KEYBOARD"],[1,406,19,15],[1,417,20,4,"MOUSE"],[1,419,20,12],[1,427,21,4,"TOUCH"],[1,429,21,12],[1,437,23,4,"CONTEXTMENU"],[1,439,23,18],[1,453,26,4,"MOUSEDOWN"],[1,455,26,16],[1,467,27,4,"MOUSEMOVE"],[1,469,27,16],[1,481,28,4,"MOUSEUP"],[1,483,28,14],[1,493,29,4,"POINTERDOWN"],[1,495,29,18],[1,509,30,4,"POINTERMOVE"],[1,511,30,18],[1,525,31,4,"SCROLL"],[1,527,31,13],[1,536,32,4,"SELECTIONCHANGE"],[1,538,32,22],[1,556,33,4,"TOUCHCANCEL"],[1,558,33,18],[1,572,34,4,"TOUCHMOVE"],[1,574,34,16],[1,586,35,4,"TOUCHSTART"],[1,588,35,17],[1,601,37,4,"bubbleOptions"],[1,603,37,20],[1,604,38,2,"passive"],[1,613,38,11],[1,616,40,4,"captureOptions"],[1,618,40,21],[1,619,41,2,"capture"],[1,628,41,11],[1,630,42,2,"passive"],[1,639,42,11],[1,642,44,0],[1,651,44,9,"restoreModality"],[1,655,45,26],[1,661,45,6,"previousModality"],[1,664,45,60],[1,670,45,34,"previousActiveModality"],[1,674,46,28],[1,680,46,8,"previousModality"],[1,684,47,6,"modality"],[1,686,47,17,"previousModality"],[1,688,48,6,"previousModality"],[1,690,48,25],[1,696,50,34],[1,702,50,8,"previousActiveModality"],[1,706,51,6,"activeModality"],[1,708,51,23,"previousActiveModality"],[1,710,52,6,"previousActiveModality"],[1,712,52,31],[1,718,54,4,"callListeners"],[1,722,56,0],[1,723,84,0],[1,732,84,9,"onPointerish"],[1,734,84,22,"event"],[1,737,85,2],[1,741,85,6,"eventType"],[1,743,85,18,"event"],[1,745,85,24,"type"],[1,750,122,4],[1,753,105,9,"isEmulatingMouseEvents"],[1,757,106,10,"eventType"],[1,761,106,24,"MOUSEDOWN"],[1,764,107,12,"activeModality"],[1,768,107,31,"MOUSE"],[1,772,108,10,"modality"],[1,774,108,21,"MOUSE"],[1,776,109,10,"activeModality"],[1,778,109,27,"MOUSE"],[1,780,110,10,"callListeners"],[1,785,113,10,"eventType"],[1,789,113,24,"MOUSEMOVE"],[1,792,114,12,"modality"],[1,796,114,25,"MOUSE"],[1,800,115,10,"modality"],[1,802,115,21,"MOUSE"],[1,804,116,10,"callListeners"],[1,810,122,8,"eventType"],[1,814,122,22,"TOUCHSTART"],[1,816,132,6],[1,823,123,6,"isEmulatingMouseEvents"],[1,826,123,31],[1,828,124,10,"event"],[1,830,124,16,"touches"],[1,839,124,27,"event"],[1,841,124,33,"touches"],[1,849,124,41,"length"],[1,856,124,50],[1,860,125,8,"isEmulatingMouseEvents"],[1,863,125,33],[1,871,127,10,"activeModality"],[1,875,127,29,"TOUCH"],[1,879,128,8,"modality"],[1,881,128,19,"TOUCH"],[1,883,129,8,"activeModality"],[1,885,129,25,"TOUCH"],[1,887,130,8,"callListeners"],[1,893,137,8,"eventType"],[1,897,137,22,"CONTEXTMENU"],[1,900,137,37,"eventType"],[1,904,137,51,"MOUSEUP"],[1,907,137,62,"eventType"],[1,911,137,76,"SELECTIONCHANGE"],[1,914,137,95,"eventType"],[1,918,137,109,"SCROLL"],[1,921,137,119,"eventType"],[1,925,137,133,"TOUCHCANCEL"],[1,928,137,148,"eventType"],[1,932,137,162,"TOUCHMOVE"],[1,936,138,6,"isEmulatingMouseEvents"],[1,939,138,31],[1,941,141,0],[1,942,163,0],[1,951,163,9,"callListeners"],[1,955,164,2],[1,959,164,6,"value"],[1,961,164,14],[1,962,165,4,"activeModality"],[1,979,166,4,"modality"],[1,991,168,2,"listeners"],[1,993,168,12,"forEach"],[1,1001,168,20,"listener"],[1,1005,169,4,"listener"],[1,1007,169,13,"value"],[1,1011,171,0],[1,1012,142,4,"canUseDOM"],[1,1014,142,13,"default"],[1,1025,144,2],[1,1027,144,2,"addEventListener"],[1,1029,144,18,"addEventListener"],[1,1047,144,19,"window"],[1,1054,22,11],[1,1061,57,0],[1,1072,58,2,"previousModality"],[1,1074,58,21,"modality"],[1,1076,59,2,"previousActiveModality"],[1,1078,59,27,"activeModality"],[1,1080,60,2,"activeModality"],[1,1082,60,19,"KEYBOARD"],[1,1084,61,2,"modality"],[1,1086,61,13,"KEYBOARD"],[1,1088,62,2,"callListeners"],[1,1092,64,2,"isEmulatingMouseEvents"],[1,1095,64,27],[1,1096,65,0],[1,1098,144,47,"bubbleOptions"],[1,1102,145,2],[1,1104,145,2,"addEventListener"],[1,1106,145,18,"addEventListener"],[1,1124,145,19,"window"],[1,1131,24,12],[1,1139,66,0],[1,1150,67,2,"restoreModality"],[1,1153,68,0],[1,1155,145,49,"bubbleOptions"],[1,1159,148,2],[1,1161,148,2,"addEventListener"],[1,1163,148,18,"addEventListener"],[1,1181,148,19,"document"],[1,1190,25,14],[1,1200,69,0],[1,1209,69,19,"event"],[1,1212,70,6,"event"],[1,1214,70,12,"metaKey"],[1,1223,70,23,"event"],[1,1225,70,29,"altKey"],[1,1233,70,39,"event"],[1,1235,70,45,"ctrlKey"],[1,1244,73,6,"modality"],[1,1248,73,19,"KEYBOARD"],[1,1252,74,4,"modality"],[1,1254,74,15,"KEYBOARD"],[1,1256,75,4,"activeModality"],[1,1258,75,21,"KEYBOARD"],[1,1260,76,4,"callListeners"],[1,1264,78,0],[1,1266,148,49,"captureOptions"],[1,1270,149,2],[1,1272,149,2,"addEventListener"],[1,1274,149,18,"addEventListener"],[1,1292,149,19,"document"],[1,1301,36,23],[1,1320,79,0],[1,1331,80,35],[1,1342,80,6,"document"],[1,1351,80,15,"visibilityState"],[1,1368,81,4,"restoreModality"],[1,1371,83,0],[1,1373,149,67,"captureOptions"],[1,1377,150,2],[1,1379,150,2,"addEventListener"],[1,1381,150,18,"addEventListener"],[1,1399,150,19,"document"],[1,1408,150,29,"POINTERDOWN"],[1,1410,150,42,"onPointerish"],[1,1412,150,56,"captureOptions"],[1,1416,151,2],[1,1418,151,2,"addEventListener"],[1,1420,151,18,"addEventListener"],[1,1438,151,19,"document"],[1,1447,151,29,"POINTERMOVE"],[1,1449,151,42,"onPointerish"],[1,1451,151,56,"captureOptions"],[1,1455,153,2],[1,1457,153,2,"addEventListener"],[1,1459,153,18,"addEventListener"],[1,1477,153,19,"document"],[1,1486,153,29,"CONTEXTMENU"],[1,1488,153,42,"onPointerish"],[1,1490,153,56,"captureOptions"],[1,1494,154,2],[1,1496,154,2,"addEventListener"],[1,1498,154,18,"addEventListener"],[1,1516,154,19,"document"],[1,1525,154,29,"MOUSEDOWN"],[1,1527,154,40,"onPointerish"],[1,1529,154,54,"captureOptions"],[1,1533,155,2],[1,1535,155,2,"addEventListener"],[1,1537,155,18,"addEventListener"],[1,1555,155,19,"document"],[1,1564,155,29,"MOUSEMOVE"],[1,1566,155,40,"onPointerish"],[1,1568,155,54,"captureOptions"],[1,1572,156,2],[1,1574,156,2,"addEventListener"],[1,1576,156,18,"addEventListener"],[1,1594,156,19,"document"],[1,1603,156,29,"MOUSEUP"],[1,1605,156,38,"onPointerish"],[1,1607,156,52,"captureOptions"],[1,1611,157,2],[1,1613,157,2,"addEventListener"],[1,1615,157,18,"addEventListener"],[1,1633,157,19,"document"],[1,1642,157,29,"TOUCHCANCEL"],[1,1644,157,42,"onPointerish"],[1,1646,157,56,"captureOptions"],[1,1650,158,2],[1,1652,158,2,"addEventListener"],[1,1654,158,18,"addEventListener"],[1,1672,158,19,"document"],[1,1681,158,29,"TOUCHMOVE"],[1,1683,158,40,"onPointerish"],[1,1685,158,54,"captureOptions"],[1,1689,159,2],[1,1691,159,2,"addEventListener"],[1,1693,159,18,"addEventListener"],[1,1711,159,19,"document"],[1,1720,159,29,"TOUCHSTART"],[1,1722,159,41,"onPointerish"],[1,1724,159,55,"captureOptions"],[1,1728,160,2],[1,1730,160,2,"addEventListener"],[1,1732,160,18,"addEventListener"],[1,1750,160,19,"document"],[1,1759,160,29,"SELECTIONCHANGE"],[1,1761,160,46,"onPointerish"],[1,1763,160,60,"captureOptions"],[1,1767,161,2],[1,1769,161,2,"addEventListener"],[1,1771,161,18,"addEventListener"],[1,1789,161,19,"document"],[1,1798,161,29,"SCROLL"],[1,1800,161,37,"onPointerish"],[1,1802,161,51,"captureOptions"],[1,1805,188,1],[1,1808]],"functionMap":{"names":["<global>","supportsPointerEvent","restoreModality","onBlurWindow","onFocusWindow","onKeyDown","onVisibilityChange","onPointerish","callListeners","listeners.forEach$argument_0","getActiveModality","getModality","addModalityListener","<anonymous>","testOnly_resetActiveModality"],"mappings":"AAA;2BCW,sED;AEgC;CFY;AGC;CHQ;AIC;CJE;AKC;CLS;AMC;CNI;AOC;CPyD;AQsB;oBCK;GDE;CRC;OUC;CVE;OWC;CXE;OYC;SCE;GDE;CZC;OcC"},"hasCjsExports":false},"type":"js/module"}]}