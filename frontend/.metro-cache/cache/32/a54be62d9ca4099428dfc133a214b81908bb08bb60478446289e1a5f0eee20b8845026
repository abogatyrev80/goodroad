{"dependencies":[{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":181},"end":{"line":10,"column":55,"index":236}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"],"imports":1}},{"name":"../canUseDom","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":237},"end":{"line":11,"column":37,"index":274}}],"key":"NAgv5vx4h/J1uxoLSWxqZG/Z81Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.getActiveModality=function(){return s},_e.getModality=function(){return l},_e.addModalityListener=function(e){return y.add(e),()=>{y.delete(e)}},_e.testOnly_resetActiveModality=function(){v=!1,s=f,l=f};var e,t,n,o=r(d[0]),u=r(d[1]),c=(e=u)&&e.__esModule?e:{default:e},s='keyboard',l='keyboard',v=!1,y=new Set,f='keyboard',p='mouse',E='touch',L='contextmenu',w='mousedown',h='mousemove',b='mouseup',M='pointerdown',_='pointermove',T='scroll',k='selectionchange',K='touchcancel',A='touchmove',O='touchstart',P={passive:!0},S={capture:!0,passive:!0};function j(){null==t&&null==n||(null!=t&&(l=t,t=null),null!=n&&(s=n,n=null),q())}function x(e){var t=e.type;if('undefined'!=typeof window&&null!=window.PointerEvent){if(t===M)return void(s!==e.pointerType&&(l=e.pointerType,s=e.pointerType,q()));if(t===_)return void(l!==e.pointerType&&(l=e.pointerType,q()))}else{if(v||(t===w&&s!==p&&(l=p,s=p,q()),t===h&&l!==p&&(l=p,q())),t===O)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(s!==E&&(l=E,s=E,q()));t!==L&&t!==b&&t!==k&&t!==T&&t!==K&&t!==A||(v=!1)}}function q(){var e={activeModality:s,modality:l};y.forEach(t=>{t(e)})}c.default&&((0,o.addEventListener)(window,'blur',function(){t=l,n=s,s=f,l=f,q(),v=!1},P),(0,o.addEventListener)(window,'focus',function(){j()},P),(0,o.addEventListener)(document,'keydown',function(e){e.metaKey||e.altKey||e.ctrlKey||l!==f&&(l=f,s=f,q())},S),(0,o.addEventListener)(document,'visibilitychange',function(){'hidden'!==document.visibilityState&&j()},S),(0,o.addEventListener)(document,M,x,S),(0,o.addEventListener)(document,_,x,S),(0,o.addEventListener)(document,L,x,S),(0,o.addEventListener)(document,w,x,S),(0,o.addEventListener)(document,h,x,S),(0,o.addEventListener)(document,b,x,S),(0,o.addEventListener)(document,K,x,S),(0,o.addEventListener)(document,A,x,S),(0,o.addEventListener)(document,O,x,S),(0,o.addEventListener)(document,k,x,S),(0,o.addEventListener)(document,T,x,S))});","lineCount":1,"map":[[1,92,172,0,"_e"],[1,95,172,0,"getActiveModality"],[1,113,172,7],[1,124,173,2],[1,131,173,9,"activeModality"],[1,132,174,0],[1,134,175,0,"_e"],[1,137,175,0,"getModality"],[1,149,175,7],[1,160,176,2],[1,167,176,9,"modality"],[1,168,177,0],[1,170,178,0,"_e"],[1,173,178,0,"addModalityListener"],[1,193,178,7],[1,202,178,36,"listener"],[1,205,180,2],[1,212,179,2,"listeners"],[1,214,179,12,"add"],[1,218,179,16,"listener"],[1,221,180,9],[1,226,181,4,"listeners"],[1,228,181,14,"delete"],[1,235,181,21,"listener"],[1,238,183,0],[1,240,184,0,"_e"],[1,243,184,0,"testOnly_resetActiveModality"],[1,272,184,7],[1,283,185,2,"isEmulatingMouseEvents"],[1,286,185,27],[1,288,186,2,"activeModality"],[1,290,186,19,"KEYBOARD"],[1,292,187,2,"modality"],[1,294,187,13,"KEYBOARD"],[1,295,188,0],[1,297,10,0],[1,301],[1,303,15,4,"previousModality"],[1,305,16,4,"previousActiveModality"],[1,307,10,0,"_addEventListener"],[1,309,10,0,"r"],[1,311,10,0,"d"],[1,313,10,0],[1,317,11,0,"_canUseDom"],[1,319,11,0,"r"],[1,321,11,0,"d"],[1,323,11,0],[1,327,11,0,"canUseDOM"],[1,330],[1,332,11,0,"_canUseDom"],[1,336],[1,363,13,4,"activeModality"],[1,365,13,21],[1,376,14,4,"modality"],[1,378,14,15],[1,389,17,4,"isEmulatingMouseEvents"],[1,392,17,29],[1,394,18,4,"listeners"],[1,396,18,16],[1,400,18,20,"Set"],[1,404,19,4,"KEYBOARD"],[1,406,19,15],[1,417,20,4,"MOUSE"],[1,419,20,12],[1,427,21,4,"TOUCH"],[1,429,21,12],[1,437,23,4,"CONTEXTMENU"],[1,439,23,18],[1,453,26,4,"MOUSEDOWN"],[1,455,26,16],[1,467,27,4,"MOUSEMOVE"],[1,469,27,16],[1,481,28,4,"MOUSEUP"],[1,483,28,14],[1,493,29,4,"POINTERDOWN"],[1,495,29,18],[1,509,30,4,"POINTERMOVE"],[1,511,30,18],[1,525,31,4,"SCROLL"],[1,527,31,13],[1,536,32,4,"SELECTIONCHANGE"],[1,538,32,22],[1,556,33,4,"TOUCHCANCEL"],[1,558,33,18],[1,572,34,4,"TOUCHMOVE"],[1,574,34,16],[1,586,35,4,"TOUCHSTART"],[1,588,35,17],[1,601,37,4,"bubbleOptions"],[1,603,37,20],[1,604,38,2,"passive"],[1,613,38,11],[1,616,40,4,"captureOptions"],[1,618,40,21],[1,619,41,2,"capture"],[1,628,41,11],[1,630,42,2,"passive"],[1,639,42,11],[1,642,44,0],[1,651,44,9,"restoreModality"],[1,655,45,26],[1,661,45,6,"previousModality"],[1,664,45,60],[1,670,45,34,"previousActiveModality"],[1,674,46,28],[1,680,46,8,"previousModality"],[1,684,47,6,"modality"],[1,686,47,17,"previousModality"],[1,688,48,6,"previousModality"],[1,690,48,25],[1,696,50,34],[1,702,50,8,"previousActiveModality"],[1,706,51,6,"activeModality"],[1,708,51,23,"previousActiveModality"],[1,710,52,6,"previousActiveModality"],[1,712,52,31],[1,718,54,4,"callListeners"],[1,722,56,0],[1,723,84,0],[1,732,84,9,"onPointerish"],[1,734,84,22,"event"],[1,737,85,2],[1,741,85,6,"eventType"],[1,743,85,18,"event"],[1,745,85,24,"type"],[1,750,86,2],[1,753,12,54],[1,773,12,43,"window"],[1,781,12,92],[1,787,12,69,"window"],[1,794,12,76,"PointerEvent"],[1,807,86,30],[1,808,87,4],[1,811,87,8,"eventType"],[1,815,87,22,"POINTERDOWN"],[1,817,93,6],[1,829,88,10,"activeModality"],[1,833,88,29,"event"],[1,835,88,35,"pointerType"],[1,849,89,8,"modality"],[1,851,89,19,"event"],[1,853,89,25,"pointerType"],[1,865,90,8,"activeModality"],[1,867,90,25,"event"],[1,869,90,31,"pointerType"],[1,881,91,8,"callListeners"],[1,887,95,4],[1,890,95,8,"eventType"],[1,894,95,22,"POINTERMOVE"],[1,896,100,6],[1,908,96,10,"modality"],[1,912,96,23,"event"],[1,914,96,29,"pointerType"],[1,928,97,8,"modality"],[1,930,97,19,"event"],[1,932,97,25,"pointerType"],[1,944,98,8,"callListeners"],[1,949,102,2],[1,954,104,7],[1,955,122,4],[1,958,105,9,"isEmulatingMouseEvents"],[1,962,106,10,"eventType"],[1,966,106,24,"MOUSEDOWN"],[1,969,107,12,"activeModality"],[1,973,107,31,"MOUSE"],[1,977,108,10,"modality"],[1,979,108,21,"MOUSE"],[1,981,109,10,"activeModality"],[1,983,109,27,"MOUSE"],[1,985,110,10,"callListeners"],[1,990,113,10,"eventType"],[1,994,113,24,"MOUSEMOVE"],[1,997,114,12,"modality"],[1,1001,114,25,"MOUSE"],[1,1005,115,10,"modality"],[1,1007,115,21,"MOUSE"],[1,1009,116,10,"callListeners"],[1,1015,122,8,"eventType"],[1,1019,122,22,"TOUCHSTART"],[1,1021,132,6],[1,1028,123,6,"isEmulatingMouseEvents"],[1,1031,123,31],[1,1033,124,10,"event"],[1,1035,124,16,"touches"],[1,1044,124,27,"event"],[1,1046,124,33,"touches"],[1,1054,124,41,"length"],[1,1061,124,50],[1,1065,125,8,"isEmulatingMouseEvents"],[1,1068,125,33],[1,1076,127,10,"activeModality"],[1,1080,127,29,"TOUCH"],[1,1084,128,8,"modality"],[1,1086,128,19,"TOUCH"],[1,1088,129,8,"activeModality"],[1,1090,129,25,"TOUCH"],[1,1092,130,8,"callListeners"],[1,1098,137,8,"eventType"],[1,1102,137,22,"CONTEXTMENU"],[1,1105,137,37,"eventType"],[1,1109,137,51,"MOUSEUP"],[1,1112,137,62,"eventType"],[1,1116,137,76,"SELECTIONCHANGE"],[1,1119,137,95,"eventType"],[1,1123,137,109,"SCROLL"],[1,1126,137,119,"eventType"],[1,1130,137,133,"TOUCHCANCEL"],[1,1133,137,148,"eventType"],[1,1137,137,162,"TOUCHMOVE"],[1,1141,138,6,"isEmulatingMouseEvents"],[1,1144,138,31],[1,1146,140,2],[1,1147,141,0],[1,1148,163,0],[1,1157,163,9,"callListeners"],[1,1161,164,2],[1,1165,164,6,"value"],[1,1167,164,14],[1,1168,165,4,"activeModality"],[1,1185,166,4,"modality"],[1,1197,168,2,"listeners"],[1,1199,168,12,"forEach"],[1,1207,168,20,"listener"],[1,1211,169,4,"listener"],[1,1213,169,13,"value"],[1,1217,171,0],[1,1218,142,4,"canUseDOM"],[1,1220,142,13,"default"],[1,1231,144,2],[1,1233,144,2,"addEventListener"],[1,1235,144,18,"addEventListener"],[1,1253,144,19,"window"],[1,1260,22,11],[1,1267,57,0],[1,1278,58,2,"previousModality"],[1,1280,58,21,"modality"],[1,1282,59,2,"previousActiveModality"],[1,1284,59,27,"activeModality"],[1,1286,60,2,"activeModality"],[1,1288,60,19,"KEYBOARD"],[1,1290,61,2,"modality"],[1,1292,61,13,"KEYBOARD"],[1,1294,62,2,"callListeners"],[1,1298,64,2,"isEmulatingMouseEvents"],[1,1301,64,27],[1,1302,65,0],[1,1304,144,47,"bubbleOptions"],[1,1308,145,2],[1,1310,145,2,"addEventListener"],[1,1312,145,18,"addEventListener"],[1,1330,145,19,"window"],[1,1337,24,12],[1,1345,66,0],[1,1356,67,2,"restoreModality"],[1,1359,68,0],[1,1361,145,49,"bubbleOptions"],[1,1365,148,2],[1,1367,148,2,"addEventListener"],[1,1369,148,18,"addEventListener"],[1,1387,148,19,"document"],[1,1396,25,14],[1,1406,69,0],[1,1415,69,19,"event"],[1,1418,70,6,"event"],[1,1420,70,12,"metaKey"],[1,1429,70,23,"event"],[1,1431,70,29,"altKey"],[1,1439,70,39,"event"],[1,1441,70,45,"ctrlKey"],[1,1450,73,6,"modality"],[1,1454,73,19,"KEYBOARD"],[1,1458,74,4,"modality"],[1,1460,74,15,"KEYBOARD"],[1,1462,75,4,"activeModality"],[1,1464,75,21,"KEYBOARD"],[1,1466,76,4,"callListeners"],[1,1470,78,0],[1,1472,148,49,"captureOptions"],[1,1476,149,2],[1,1478,149,2,"addEventListener"],[1,1480,149,18,"addEventListener"],[1,1498,149,19,"document"],[1,1507,36,23],[1,1526,79,0],[1,1537,80,35],[1,1548,80,6,"document"],[1,1557,80,15,"visibilityState"],[1,1574,81,4,"restoreModality"],[1,1577,83,0],[1,1579,149,67,"captureOptions"],[1,1583,150,2],[1,1585,150,2,"addEventListener"],[1,1587,150,18,"addEventListener"],[1,1605,150,19,"document"],[1,1614,150,29,"POINTERDOWN"],[1,1616,150,42,"onPointerish"],[1,1618,150,56,"captureOptions"],[1,1622,151,2],[1,1624,151,2,"addEventListener"],[1,1626,151,18,"addEventListener"],[1,1644,151,19,"document"],[1,1653,151,29,"POINTERMOVE"],[1,1655,151,42,"onPointerish"],[1,1657,151,56,"captureOptions"],[1,1661,153,2],[1,1663,153,2,"addEventListener"],[1,1665,153,18,"addEventListener"],[1,1683,153,19,"document"],[1,1692,153,29,"CONTEXTMENU"],[1,1694,153,42,"onPointerish"],[1,1696,153,56,"captureOptions"],[1,1700,154,2],[1,1702,154,2,"addEventListener"],[1,1704,154,18,"addEventListener"],[1,1722,154,19,"document"],[1,1731,154,29,"MOUSEDOWN"],[1,1733,154,40,"onPointerish"],[1,1735,154,54,"captureOptions"],[1,1739,155,2],[1,1741,155,2,"addEventListener"],[1,1743,155,18,"addEventListener"],[1,1761,155,19,"document"],[1,1770,155,29,"MOUSEMOVE"],[1,1772,155,40,"onPointerish"],[1,1774,155,54,"captureOptions"],[1,1778,156,2],[1,1780,156,2,"addEventListener"],[1,1782,156,18,"addEventListener"],[1,1800,156,19,"document"],[1,1809,156,29,"MOUSEUP"],[1,1811,156,38,"onPointerish"],[1,1813,156,52,"captureOptions"],[1,1817,157,2],[1,1819,157,2,"addEventListener"],[1,1821,157,18,"addEventListener"],[1,1839,157,19,"document"],[1,1848,157,29,"TOUCHCANCEL"],[1,1850,157,42,"onPointerish"],[1,1852,157,56,"captureOptions"],[1,1856,158,2],[1,1858,158,2,"addEventListener"],[1,1860,158,18,"addEventListener"],[1,1878,158,19,"document"],[1,1887,158,29,"TOUCHMOVE"],[1,1889,158,40,"onPointerish"],[1,1891,158,54,"captureOptions"],[1,1895,159,2],[1,1897,159,2,"addEventListener"],[1,1899,159,18,"addEventListener"],[1,1917,159,19,"document"],[1,1926,159,29,"TOUCHSTART"],[1,1928,159,41,"onPointerish"],[1,1930,159,55,"captureOptions"],[1,1934,160,2],[1,1936,160,2,"addEventListener"],[1,1938,160,18,"addEventListener"],[1,1956,160,19,"document"],[1,1965,160,29,"SELECTIONCHANGE"],[1,1967,160,46,"onPointerish"],[1,1969,160,60,"captureOptions"],[1,1973,161,2],[1,1975,161,2,"addEventListener"],[1,1977,161,18,"addEventListener"],[1,1995,161,19,"document"],[1,2004,161,29,"SCROLL"],[1,2006,161,37,"onPointerish"],[1,2008,161,51,"captureOptions"],[1,2011,188,1],[1,2014]],"functionMap":{"names":["<global>","supportsPointerEvent","restoreModality","onBlurWindow","onFocusWindow","onKeyDown","onVisibilityChange","onPointerish","callListeners","listeners.forEach$argument_0","getActiveModality","getModality","addModalityListener","<anonymous>","testOnly_resetActiveModality"],"mappings":"AAA;2BCW,sED;AEgC;CFY;AGC;CHQ;AIC;CJE;AKC;CLS;AMC;CNI;AOC;CPyD;AQsB;oBCK;GDE;CRC;OUC;CVE;OWC;CXE;OYC;SCE;GDE;CZC;OcC"},"hasCjsExports":false},"type":"js/module"}]}